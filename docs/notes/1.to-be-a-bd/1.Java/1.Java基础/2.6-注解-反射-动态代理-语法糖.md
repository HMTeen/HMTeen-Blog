---
tags:
  - Java
createTime: 2025/03/20 15:28:27
title: 6-注解-反射-动态代理-语法糖
permalink: /ToBeABD/Java/7cyjhjv7/
---
---

## 注解-反射-动态代理-语法糖

### 注解

==【八股】什么是注解？==

- Java5引入的新特性，可以看作是一种特殊的注释，**提供某些信息供程序在编译或者运行时使用。**
- 注解本质是一个继承了 `Annotation`的特殊接口。
- 注解主要用于修饰类、方法或者变量。

---

==【八股】注解的解析方式有哪几种？==

注解只有被解析之后才生效，常见的解析方式有两种：

- 编译期直接扫描：例如 `@override`等注解，在编译器就检测当前方法是否重写了父类方法
- 运行期通过反射处理：例如框架自带的注解 `@value`、`@Component`等

### 反射

==【八股】什么是反射？优点和缺点？==

概念：

- 能够动态获取信息及动态调用对象方法的功能成为Java语言的反射机制。

  - 动态获取信息：指在运行状态下，对于任何一个类，都能够知道这个类的所有属性和方法
  - 举例：动态代理、注解、Spring框架等都用到了反射
- 反射要获取的是字节码文件对象，这个对象在内存中是唯一的。通过字节码文件对象，可以获取到类的：构造方法、成员方法、成员变量

优点：

- 动态性：动态获取和调用对象方法
- 增强性：在不修改原有代码的基础上，对目标方法进行增强
- 解耦：框架设计中，常用反射技术来实现解耦，比如Spring的IOC容器
- 测试：在单元测试中，反射可以获取到受保护的类成员，从而使得测试逻辑更全面

缺点：

- 性能问题：反射需要在运行时查找，相比直接调用方法，会更耗时一点
- 安全问题：反射可以绕过权限访问符的限制，访问一些私有的、受保护的类成员
- 增加复杂度：过多的使用反射会导致代码的可读性和可维护性降低

---

**【补充】字节码文件和字节码文件对象的区别**？

- java文件：编写的java代码，后缀为.java
- 字节码文件：编译java文件后生成的class文件（在硬盘上真实存在）
- 字节码文件对象：class文件加载到内存后，虚拟机自动创建出来的对象（对象包含：构造方法、成员变量、成员方法）

---

**【补充】获取字节码文件对象的三种方法**

| 获取手段                              |                        |
| :------------------------------------ | :---------------------: |
| 根据Class类的静态方法获取（用的最多） | Class.forName("全类名") |
| 根据要获取类名的class属性获取         |       类名.class       |
| 根据类的实例对象获取                  |   实例对象.getClass()   |

```java
// 1、根据Class类的静态方法获取（用的最多）
// 全类名 = 包名 + 类名
Class clazz1 = Class.forName("com.itheima.reflectdemo.Student");

// 2、根据要获取类名的class属性获取
Class clazz2 = Student.class;

System.out.println(clazz1 == clazz2);//true，因为class文件在硬盘中是唯一的，所以，当这个文件加载到内存之后产生的对象也是唯一的

// 3、根据类的实例对象获取
Student s = new Student();
Class clazz3 = s.getClass();
System.out.println(clazz1 == clazz2);//true
System.out.println(clazz2 == clazz3);//true
```

### 动态代理

==【八股】什么是代理模式？有哪些分类？==

代理模式理解：明星 + 经纪人 + 演唱活动（真实对象 + 代理对象 + 对象方法）

代理模式作用：在不修改目标对象功能的前提下，扩展目标对象的功能。

代理模式分类：静态代理、动态代理（JDK、CGLIB）

---

==【八股】两种代理模式的区别？==

JVM层面：

- 静态代理：需要在编译时就提供好接口、实现类、代理类
- 动态代理：在运行时动态生成类字节码文件，并加载到JVM中，不需要在编译时就确定

灵活性层面：

- 静态代理：不灵活：接口新增方法后，目标对象和代理对象都要改动；不便捷：需要 为每个目标类实现一个代理对象
- 动态代理：灵活：不需要实现接口，就可以直接代理实现类；便捷：不需要为每一个目标类创建一个代理类

---

==【八股】JDK动态代理和CGLIB动态代理的区别？==

JDK动态代理：只能代理实现了接口的类

CGLIB动态代理：只能代理可以被继承的类

效率上，JDK的效率更高。

---

- [参考文章](https://javaguide.cn/java/basis/proxy.html#_1-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F)

### 语法糖

参考文章：[JavaGuide](https://javaguide.cn/java/basis/syntactic-sugar.html)

==【八股】什么是语法糖？==

语法糖就是某种语法，这种语法对语言的功能没有影响，但是可以简化程序员的开发。

Java中的语法糖在编译阶段就会被还原为基础的语法结构，这个过程就是解语法糖。

---

==【八股】Java中常见的语法糖有哪些？==

可变长参数、枚举类、自动拆箱与装箱、`try-with-resource`、数值字面量的下划线（10_000，反编译后就是10000）等

---

==【八股】枚举类的特点？==

- 枚举类反编译后可以知道，是 `public final class T extends Enum`，即编译器帮我们创建了一个类继承 `Enum`，且该类被 `Final`修饰，不可被继承。
- 枚举类型中，变量都被 `public static final`修饰
- 枚举类可以实现接口（一个或多个）
- 枚举类可以自定义方法，也可以自定义抽象方法（无需显示提供 `abstract`关键字）
